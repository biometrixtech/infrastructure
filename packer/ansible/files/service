[Unit]
Description=High-performance, schema-free document-oriented database
After=cloud-init.target

[Service]
User=mongodb
Group=mongodb

# Various limits suggested by https://docs.mongodb.com/manual/reference/ulimit/
LimitFSIZE=infinity
LimitCPU=infinity
LimitAS=infinity
LimitNOFILE=64000
LimitNPROC=64000

Type=forking
PIDFile=/var/run/mongodb/mongod.pid
ExecStart=/usr/bin/mongod --config /etc/mongodb/mongodb.conf
ExecReload=/bin/kill -HUP $MAINPID

[Install]
WantedBy=multi-user.target
